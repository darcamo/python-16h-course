
<section id="indexando_arrays">
    <div class="retangulo-preto">
        <h2>Indexando Arrays</h2>

        <ul>
            <li>Arrays com uma dimensão podem ser indexados, fatiados, e iterados de forma semelhante a listas</li>
        </ul>

        <code-terminal dontshowcursor><in>a = np.arange(10)**3</in>
<in>a</in>
<output>array([  0,   1,   8,  27,  64, 125, 216, 343, 512, 729])</output>
<span class="fragment" data-fragment-index="1"><in>a[2]</in>
<output>8</output></span>
<span class="fragment" data-fragment-index="2"><in>a[2:5]</in>
<output>array([ 8, 27, 64])</output></span>
<span class="fragment" data-fragment-index="3"><in>a[:6:2] = -1000  # Seta elementos nas posições 0, 2 e 4 </in>
<in>a</in>
<output>array([-1000,     1, -1000,    27, -1000,   125,   216,   343,   512,   729])</output></span>
<span class="fragment" data-fragment-index="4"><in>a[ : :-1]  # Inverte a ordem dos elementos de a</in>
<output>array([  729,   512,   343,   216,   125, -1000,    27, -1000,     1, -1000])</output></span></code-terminal>
                        <svg id="indexando-arrays-placeholder"></svg>
    </div>
</section>



<section id="indexando_arrays2">
    <div class="retangulo-preto">
                        <h2>Indexando Arrays</h2>
                        <ul>
                            <li>Arrays multidimensionais podem conter um índice por eixo</li>
                            <li>Esses índices são separados por vírgula</li>
                            <li class="fragment" data-fragment-index="5">Podemos fornecer menos índices que eixos</li>
                            <li class="fragment" data-fragment-index="6">Também podemos usar índices negativos</li>
                        </ul>


                        <div class="container" style="width:100%;">
                            <div class="element" style="width:calc(100% - 200pt - 150px);"><code-terminal dontshowcursor style="font-size:90%;"><in>def f(x,y): return 10*x+y</in>
<in>b = np.fromfunction(f, (5,4), dtype=int)</in>
<span class="fragment" data-fragment-index="1"><in>b[2,3]</in>
<output>23</output></span>
<span class="fragment" data-fragment-index="2"><in>b[0:5, 1]</in>
<output>array([ 1, 11, 21, 31, 41])</output></span>
<span class="fragment" data-fragment-index="3"><in>b[ : ,1]  # Mesmo que exemplo anterior</in>
<output>array([ 1, 11, 21, 31, 41])</output></span>
<span class="fragment" data-fragment-index="4"><in>print( b[1:3, : ] )
[[10, 11, 12, 13],
 [20, 21, 22, 23]]</in></span>
<span class="fragment" data-fragment-index="5"><in>print(b[0])  # slices completos p/ os que faltam</in>
<output>[0, 1, 2, 3]</output></span>
<span class="fragment" data-fragment-index="6"><in>print(b[-1])</in>
<output>[40, 41, 42, 43]</output></span>
<span class="fragment" data-fragment-index="7"><in>print( b[2:4,::2] )  # Combina dois slices
[[20, 22],
 [30, 32]]</in></span></code-terminal></div>

                        <div style=width:200pt;" class="element" style="transform: scale(0.7,0.7);" ><svg id="indexando-arrays-placeholder2"></svg></div>
                        </div>

                        <aside class="notes">
                            <ul>
                                <li>Quando um número menor de índices que o número
                                    de eixos é fornecido os índices que faltam são
                                    considerados slices completos </li>
                                <li>The dots (...) represent as many colons as
                                needed to produce a complete indexing
                                    tuple. For example, if x is a rank 5 array (i.e., it has 5 axes), then
                                    <ul>
                                        <li>x[1,2,...] is equivalent to x[1,2,:,:,:],</li>
                                        <li>x[...,3] to x[:,:,:,:,3] and</li>
                                        <li>x[4,...,5,:] to x[4,:,:,5,:]</li>
                                    </ul></li>
                            </ul>
                        </aside>
    </div>
</section>












<section>
    <div class="retangulo-preto">
                        <h2>Indexando Arrays</h2>
                        <ul>
                            <li>Podemos usar também <code>...</code> para representar <span class="green">tantos ":" quanto necessário</span> para produzir uma indexação completa</li>
                            <li>Ex: Considere por exemplo um array <code>x</code> de rank 5</li>
                            <li>Temos então que:</li>
                            <ul>
                                <li><code>x[1,2,...]</code> equivale a <code>x[1,2,:,:,:]</code>,</li>
                                <li><code>x[...,3]</code> equivale a <code>x[:,:,:,:,3]</code></li>
                                <li><code>x[4,...,5,:]</code> equivale a <code>x[4,:,:,5,:]</code></li>
                                <li>Etc.</li>
                            </ul>
                        </ul>
    </div>
</section>

<section>
    <div class="retangulo-preto">
                        <h2>Indexando Arrays</h2>
                        <ul>
                            <li>Ao indexar uma dada dimensão o array resultante não possui aquela dimensão, mas para slices a dimensão continua existindo</li>
                            <li>Compare os exemplos abaixo (especialmente o shape do resultado)</li>
                        </ul>
                        <!-- <div class="displayed"><img alt="" data-src="imagens/numpy_part/indexing.png" height="500px"/></div> -->
                        <div class="displayed"><object type="image/svg+xml" data="imagens/indexing.svg"></object></div>
    </div>
</section>

<section id="indexando_arrays3">
    <div class="retangulo-preto">
                        <h2>Indexando Arrays</h2>
                        <h3>Vetores Booleanos</h3>

                        <ul>
                            <li>Arrays booleanos podem ser usados para indexar outros arrays</li>
                            <li>Isso é especialmente útil para pegar elementos obedecendo certas condições</li>
                            <li>Exemplo:</li>
                        </ul>
                        <div class="container" style="width:100%;">
                            <div class="element" style="width:calc(100% - 250pt - 150px);"><code-terminal dontshowcursor style="font-size:95%;"><in>b = np.random.randint(0,100, size=(4,5))</in>
<in>linhas = np.array([False, True, True, False])</in>
<span class="fragment" data-fragment-index="1"><in>b[linhas]</in>
<output>
array([[20,  5, 68, 48, 23],
       [83, 70, 12, 73, 31]])</output></span>
<span class="fragment" data-fragment-index="2"><in>b[b < 30]  # Pega elementos que 30</in>
<output>array([20,  5, 23, 12,  0])</output></span>
<span class="fragment" data-fragment-index="3"><in>idx = (b >= 30); b[idx]  # Elementos >= 30</in>
<output>array([39, 87, 96, ... ... , 94, 30, 87])</output></span>
<span class="fragment" data-fragment-index="4"><in># Colunas com todos os elementos são >= 30</in>
<in>b[:, idx.all(axis=0)]  # Indexa colunas</in>
<output>
array([[97],
       [48],
       [73],
       [30]])</output></span></code-terminal></div>
                            <div class="element" style="transform: scale(0.8) translate(-50px,0);"><svg id="indexando-arrays-placeholder3"></svg></div>
                        </div>
    </div>
</section>
